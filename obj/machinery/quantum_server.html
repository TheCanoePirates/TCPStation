<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <base href="../../" />
    <link rel="stylesheet" href="dmdoc.css" />
    <title>&#x2F;obj&#x2F;machinery&#x2F;quantum_server - &#x2F;tg&#x2F; Station 13</title>
</head>
<body>
<header>
    <a href="index.html">&#x2F;tg&#x2F; Station 13</a> -
    <a href="index.html#modules">Modules</a> -
    <a href="index.html#types">Types</a>
 &mdash; <a href="obj/machinery/quantum_server.html#var">Var Details</a> - <a href="obj/machinery/quantum_server.html#proc">Proc Details</a></header>
<main>
<h1>quantum_server <aside>/<a href="obj.html">obj</a>/<a href="obj/machinery.html">machinery</a>/<a href="obj/machinery/quantum_server.html">quantum_server</a></aside>
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/_parent.dm#L4">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;_parent.dm 4"/></a></h1>

<p>The base object for the quantum server</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#var/available_domains">available_domains</a></th><td>List of available domains</td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#var/avatar_connection_refs">avatar_connection_refs</a></th><td>Current plugged in users</td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#var/capacitor_coefficient">capacitor_coefficient</a></th><td>Affects server cooldown efficiency</td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#var/domain_randomized">domain_randomized</a></th><td>If the current domain was a random selection</td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#var/exit_turfs">exit_turfs</a></th><td>The turfs we can place a hololadder on.</td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#var/generated_domain">generated_domain</a></th><td>The loaded map template, map_template/virtual_domain</td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#var/glitch_chance">glitch_chance</a></th><td>Chance multipled by threat to spawn a glitch</td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#var/is_ready">is_ready</a></th><td>Prevents multiple user actions. Handled by loading domains and cooldowns</td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#var/multiplayer_bonus">multiplayer_bonus</a></th><td>Scales loot with extra players</td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#var/mutation_candidate_refs">mutation_candidate_refs</a></th><td>Cached list of mutable mobs in zone for cybercops</td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#var/points">points</a></th><td>The amount of points in the system, used to purchase maps</td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#var/radio">radio</a></th><td>The radio the console can speak into</td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#var/retries_spent">retries_spent</a></th><td>Keeps track of the number of times someone has built a hololadder</td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#var/scanner_tier">scanner_tier</a></th><td>Changes how much info is available on the domain</td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#var/server_cooldown_time">server_cooldown_time</a></th><td>Length of time it takes for the server to cool down after resetting. Here to give runners downtime so their faces don't get stuck like that</td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#var/servo_bonus">servo_bonus</a></th><td>Applies bonuses to rewards etc</td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#var/spawned_threat_refs">spawned_threat_refs</a></th><td>Any ghosts that have spawned in</td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#var/threat">threat</a></th><td>Determines the glitches available to spawn, builds with completion</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#proc/add_threats">add_threats</a></th><td>Adds threats to the list and notifies players</td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#proc/attempt_spawn_cache">attempt_spawn_cache</a></th><td>just in case someone's connected
Attempts to spawn a crate twice based on the list of available locations</td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#proc/begin_shutdown">begin_shutdown</a></th><td>Gives all current occupants a notification that the server is going down</td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#proc/calculate_rewards">calculate_rewards</a></th><td>Handles calculating rewards based on number of players, parts, threats, etc</td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#proc/cold_boot_map">cold_boot_map</a></th><td>Links all the loading processes together - does validation for booting a map</td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#proc/cool_off">cool_off</a></th><td>Resets the cooldown state and updates icons</td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#proc/generate_avatar">generate_avatar</a></th><td>Generates a new avatar for the bitrunner.</td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#proc/generate_hololadder">generate_hololadder</a></th><td>Generates a new hololadder for the bitrunner. Effectively a respawn attempt.</td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#proc/generate_loot">generate_loot</a></th><td>Handles spawning the (new) crate and deleting the former</td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#proc/get_antagonist_role">get_antagonist_role</a></th><td>Choses which antagonist role is spawned based on threat</td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#proc/get_available_domains">get_available_domains</a></th><td>Compiles a list of available domains.</td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#proc/get_avatar_data">get_avatar_data</a></th><td>If there are hosted minds, attempts to get a list of their current virtual bodies w/ vitals</td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#proc/get_completion_certificate">get_completion_certificate</a></th><td>Returns the markdown text containing domain completion information</td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#proc/get_mutation_target">get_mutation_target</a></th><td>Selects a target to mutate. Gives two attempts, then crashes if it fails.</td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#proc/get_random_domain_id">get_random_domain_id</a></th><td>Gets a random available domain given the current points.</td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#proc/get_random_nearby_forge">get_random_nearby_forge</a></th><td>Locates any turfs with forges on them, returns a random one</td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#proc/grade_completion">grade_completion</a></th><td>Grades the player's run based on several factors</td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#proc/load_domain">load_domain</a></th><td>If any one of these fail, it reverts the entire process
Initializes a new domain if the given key is valid and the user has enough points</td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#proc/load_map_items">load_map_items</a></th><td>Loads in necessary map items like hololadder spawns, caches, etc</td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#proc/load_mob_segments">load_mob_segments</a></th><td>Loads in any mob segments of the map</td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#proc/notify_spawned_threats">notify_spawned_threats</a></th><td>Finds any mobs with minds in the zones and gives them the bad news</td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#proc/on_broken">on_broken</a></th><td>If broken via signal, disconnects all users</td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#proc/on_corpse_spawned">on_corpse_spawned</a></th><td>Whenever a corpse spawner makes a new corpse, add it to the list of potential mutations</td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#proc/on_delete">on_delete</a></th><td>Being qdeleted - make sure the circuit and connected mobs go with it</td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#proc/on_goal_turf_entered">on_goal_turf_entered</a></th><td>Whenever something enters the send tiles, check if it's a loot crate. If so, alert players.</td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#proc/on_goal_turf_examined">on_goal_turf_examined</a></th><td>Handles examining the server. Shows cooldown time and efficiency.</td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#proc/on_template_loaded">on_template_loaded</a></th><td>Scans over the inbound created_atoms from lazy templates</td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#proc/on_threat_created">on_threat_created</a></th><td>Just in case there's any special handling for the domain
Handles when cybercops are summoned into the area or ghosts click a ghost role spawner</td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#proc/remove_threat">remove_threat</a></th><td>Removes a specific threat - used when station spawning</td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#proc/reset">reset</a></th><td>Stops the current virtual domain and disconnects all users</td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#proc/reset_equipment">reset_equipment</a></th><td>Removes all blacklisted items from a mob and returns them to base state</td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#proc/scrub_vdom">scrub_vdom</a></th><td>Tries to clean up everything in the domain</td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#proc/setup_glitch">setup_glitch</a></th><td>Selects the role and waits for a ghost orbiter</td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#proc/sever_connections">sever_connections</a></th><td>Severs any connected users</td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#proc/spark_at_location">spark_at_location</a></th><td>Do some magic teleport sparks</td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#proc/spawn_glitch">spawn_glitch</a></th><td>Orbit poll has concluded - spawn the antag</td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#proc/station_spawn">station_spawn</a></th><td>Oh boy - transports the antag station side</td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#proc/stock_gear">stock_gear</a></th><td>Scans over neo's contents for bitrunning tech disks. Loads the items or abilities onto the avatar.</td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#proc/validate_mutation_candidates">validate_mutation_candidates</a></th><td>Removes any invalid candidates from the list</td></tr>
            <tr><th><a href="obj/machinery/quantum_server.html#proc/validate_turf">validate_turf</a></th><td>Returns a turf if it's not dense, else will find a neighbor.</td></tr></table>
    <h2 id="var">Var Details</h2><h3 id="var/available_domains"><aside class="declaration">var </aside>available_domains
            <aside>&ndash; /list</aside>
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/_parent.dm#L24">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;_parent.dm 24"/></a></h3>
        <p>List of available domains</p><h3 id="var/avatar_connection_refs"><aside class="declaration">var </aside>avatar_connection_refs
            <aside>&ndash; /list/datum/weakref</aside>
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/_parent.dm#L26">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;_parent.dm 26"/></a></h3>
        <p>Current plugged in users</p><h3 id="var/capacitor_coefficient"><aside class="declaration">var </aside>capacitor_coefficient
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/_parent.dm#L14">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;_parent.dm 14"/></a></h3>
        <p>Affects server cooldown efficiency</p><h3 id="var/domain_randomized"><aside class="declaration">var </aside>domain_randomized
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/_parent.dm#L18">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;_parent.dm 18"/></a></h3>
        <p>If the current domain was a random selection</p><h3 id="var/exit_turfs"><aside class="declaration">var </aside>exit_turfs
            <aside>&ndash; /<a href="turf.html">turf</a></aside>
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/_parent.dm#L48">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;_parent.dm 48"/></a></h3>
        <p>The turfs we can place a hololadder on.</p><h3 id="var/generated_domain"><aside class="declaration">var </aside>generated_domain
            <aside>&ndash; /<a href="datum.html">datum</a>/<a href="datum/lazy_template.html">lazy_template</a>/<a href="datum/lazy_template/virtual_domain.html">virtual_domain</a></aside>
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/_parent.dm#L16">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;_parent.dm 16"/></a></h3>
        <p>The loaded map template, map_template/virtual_domain</p><h3 id="var/glitch_chance"><aside class="declaration">var </aside>glitch_chance
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/_parent.dm#L22">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;_parent.dm 22"/></a></h3>
        <p>Chance multipled by threat to spawn a glitch</p><h3 id="var/is_ready"><aside class="declaration">var </aside>is_ready
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/_parent.dm#L20">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;_parent.dm 20"/></a></h3>
        <p>Prevents multiple user actions. Handled by loading domains and cooldowns</p><h3 id="var/multiplayer_bonus"><aside class="declaration">var </aside>multiplayer_bonus
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/_parent.dm#L32">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;_parent.dm 32"/></a></h3>
        <p>Scales loot with extra players</p><h3 id="var/mutation_candidate_refs"><aside class="declaration">var </aside>mutation_candidate_refs
            <aside>&ndash; /list/datum/weakref</aside>
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/_parent.dm#L28">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;_parent.dm 28"/></a></h3>
        <p>Cached list of mutable mobs in zone for cybercops</p><h3 id="var/points"><aside class="declaration">var </aside>points
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/_parent.dm#L36">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;_parent.dm 36"/></a></h3>
        <p>The amount of points in the system, used to purchase maps</p><h3 id="var/radio"><aside class="declaration">var </aside>radio
            <aside>&ndash; /<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/<a href="obj/item/radio.html">radio</a></aside>
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/_parent.dm#L34">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;_parent.dm 34"/></a></h3>
        <p>The radio the console can speak into</p><h3 id="var/retries_spent"><aside class="declaration">var </aside>retries_spent
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/_parent.dm#L38">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;_parent.dm 38"/></a></h3>
        <p>Keeps track of the number of times someone has built a hololadder</p><h3 id="var/scanner_tier"><aside class="declaration">var </aside>scanner_tier
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/_parent.dm#L40">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;_parent.dm 40"/></a></h3>
        <p>Changes how much info is available on the domain</p><h3 id="var/server_cooldown_time"><aside class="declaration">var </aside>server_cooldown_time
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/_parent.dm#L42">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;_parent.dm 42"/></a></h3>
        <p>Length of time it takes for the server to cool down after resetting. Here to give runners downtime so their faces don't get stuck like that</p><h3 id="var/servo_bonus"><aside class="declaration">var </aside>servo_bonus
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/_parent.dm#L44">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;_parent.dm 44"/></a></h3>
        <p>Applies bonuses to rewards etc</p><h3 id="var/spawned_threat_refs"><aside class="declaration">var </aside>spawned_threat_refs
            <aside>&ndash; /list/datum/weakref</aside>
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/_parent.dm#L30">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;_parent.dm 30"/></a></h3>
        <p>Any ghosts that have spawned in</p><h3 id="var/threat"><aside class="declaration">var </aside>threat
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/_parent.dm#L46">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;_parent.dm 46"/></a></h3>
        <p>Determines the glitches available to spawn, builds with completion</p><h2 id="proc">Proc Details</h2><h3 id="proc/add_threats"><aside class="declaration">proc </aside>add_threats<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/threat) 
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/threats.dm#L2">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;threats.dm 2"/></a></aside>
        </h3>
        <p>Adds threats to the list and notifies players</p><h3 id="proc/attempt_spawn_cache"><aside class="declaration">proc </aside>attempt_spawn_cache<aside>(/list/possible_turfs) 
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/obj_generation.dm#L2">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;obj_generation.dm 2"/></a></aside>
        </h3>
        <p>just in case someone's connected
Attempts to spawn a crate twice based on the list of available locations</p><h3 id="proc/begin_shutdown"><aside class="declaration">proc </aside>begin_shutdown<aside>(/<a href="mob.html">mob</a>/user) 
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/map_handling.dm#L2">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;map_handling.dm 2"/></a></aside>
        </h3>
        <p>Gives all current occupants a notification that the server is going down</p><h3 id="proc/calculate_rewards"><aside class="declaration">proc </aside>calculate_rewards<aside>() 
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/loot.dm#L2">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;loot.dm 2"/></a></aside>
        </h3>
        <p>Handles calculating rewards based on number of players, parts, threats, etc</p><h3 id="proc/cold_boot_map"><aside class="declaration">proc </aside>cold_boot_map<aside>(map_key) 
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/map_handling.dm#L28">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;map_handling.dm 28"/></a></aside>
        </h3>
        <p>Links all the loading processes together - does validation for booting a map</p><h3 id="proc/cool_off"><aside class="declaration">proc </aside>cool_off<aside>() 
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/util.dm#L5">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;util.dm 5"/></a></aside>
        </h3>
        <p>Resets the cooldown state and updates icons</p><h3 id="proc/generate_avatar"><aside class="declaration">proc </aside>generate_avatar<aside>(/<a href="obj.html">obj</a>/<a href="obj/structure/hololadder.html">structure/hololadder</a>/wayout, /<a href="datum.html">datum</a>/<a href="datum/outfit.html">outfit</a>/netsuit) 
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/obj_generation.dm#L19">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;obj_generation.dm 19"/></a></aside>
        </h3>
        <p>Generates a new avatar for the bitrunner.</p><h3 id="proc/generate_hololadder"><aside class="declaration">proc </aside>generate_hololadder<aside>() 
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/obj_generation.dm#L69">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;obj_generation.dm 69"/></a></aside>
        </h3>
        <p>Generates a new hololadder for the bitrunner. Effectively a respawn attempt.</p><h3 id="proc/generate_loot"><aside class="declaration">proc </aside>generate_loot<aside>(/<a href="obj.html">obj</a>/cache, /<a href="obj.html">obj</a>/<a href="obj/machinery.html">machinery</a>/<a href="obj/machinery/byteforge.html">byteforge</a>/chosen_forge) 
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/loot.dm#L18">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;loot.dm 18"/></a></aside>
        </h3>
        <p>Handles spawning the (new) crate and deleting the former</p><h3 id="proc/get_antagonist_role"><aside class="declaration">proc </aside>get_antagonist_role<aside>() 
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/threats.dm#L7">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;threats.dm 7"/></a></aside>
        </h3>
        <p>Choses which antagonist role is spawned based on threat</p><h3 id="proc/get_available_domains"><aside class="declaration">proc </aside>get_available_domains<aside>() 
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/util.dm#L11">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;util.dm 11"/></a></aside>
        </h3>
        <p>Compiles a list of available domains.</p><h3 id="proc/get_avatar_data"><aside class="declaration">proc </aside>get_avatar_data<aside>() 
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/util.dm#L33">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;util.dm 33"/></a></aside>
        </h3>
        <p>If there are hosted minds, attempts to get a list of their current virtual bodies w/ vitals</p><h3 id="proc/get_completion_certificate"><aside class="declaration">proc </aside>get_completion_certificate<aside>() 
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/loot.dm#L44">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;loot.dm 44"/></a></aside>
        </h3>
        <p>Returns the markdown text containing domain completion information</p><h3 id="proc/get_mutation_target"><aside class="declaration">proc </aside>get_mutation_target<aside>() 
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/threats.dm#L22">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;threats.dm 22"/></a></aside>
        </h3>
        <p>Selects a target to mutate. Gives two attempts, then crashes if it fails.</p><h3 id="proc/get_random_domain_id"><aside class="declaration">proc </aside>get_random_domain_id<aside>() 
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/util.dm#L67">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;util.dm 67"/></a></aside>
        </h3>
        <p>Gets a random available domain given the current points.</p><h3 id="proc/get_random_nearby_forge"><aside class="declaration">proc </aside>get_random_nearby_forge<aside>() 
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/util.dm#L58">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;util.dm 58"/></a></aside>
        </h3>
        <p>Locates any turfs with forges on them, returns a random one</p><h3 id="proc/grade_completion"><aside class="declaration">proc </aside>grade_completion<aside>(completion_time) 
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/loot.dm#L93">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;loot.dm 93"/></a></aside>
        </h3>
        <p>Grades the player's run based on several factors</p><h3 id="proc/load_domain"><aside class="declaration">proc </aside>load_domain<aside>(map_key) 
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/map_handling.dm#L69">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;map_handling.dm 69"/></a></aside>
        </h3>
        <p>If any one of these fail, it reverts the entire process
Initializes a new domain if the given key is valid and the user has enough points</p><h3 id="proc/load_map_items"><aside class="declaration">proc </aside>load_map_items<aside>() 
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/map_handling.dm#L80">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;map_handling.dm 80"/></a></aside>
        </h3>
        <p>Loads in necessary map items like hololadder spawns, caches, etc</p><h3 id="proc/load_mob_segments"><aside class="declaration">proc </aside>load_mob_segments<aside>() 
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/obj_generation.dm#L94">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;obj_generation.dm 94"/></a></aside>
        </h3>
        <p>Loads in any mob segments of the map</p><h3 id="proc/notify_spawned_threats"><aside class="declaration">proc </aside>notify_spawned_threats<aside>() 
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/threats.dm#L38">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;threats.dm 38"/></a></aside>
        </h3>
        <p>Finds any mobs with minds in the zones and gives them the bad news</p><h3 id="proc/on_broken"><aside class="declaration">proc </aside>on_broken<aside>(/<a href="datum.html">datum</a>/source) 
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/signal_handlers.dm#L2">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;signal_handlers.dm 2"/></a></aside>
        </h3>
        <p>If broken via signal, disconnects all users</p><h3 id="proc/on_corpse_spawned"><aside class="declaration">proc </aside>on_corpse_spawned<aside>(/<a href="datum.html">datum</a>/source, /<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/corpse) 
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/signal_handlers.dm#L8">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;signal_handlers.dm 8"/></a></aside>
        </h3>
        <p>Whenever a corpse spawner makes a new corpse, add it to the list of potential mutations</p><h3 id="proc/on_delete"><aside class="declaration">proc </aside>on_delete<aside>(/<a href="datum.html">datum</a>/source) 
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/signal_handlers.dm#L14">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;signal_handlers.dm 14"/></a></aside>
        </h3>
        <p>Being qdeleted - make sure the circuit and connected mobs go with it</p><h3 id="proc/on_goal_turf_entered"><aside class="declaration">proc </aside>on_goal_turf_entered<aside>(/<a href="datum.html">datum</a>/source, /<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/arrived, /<a href="atom.html">atom</a>/old_loc, /list/atom/old_locs) 
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/signal_handlers.dm#L30">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;signal_handlers.dm 30"/></a></aside>
        </h3>
        <p>Whenever something enters the send tiles, check if it's a loot crate. If so, alert players.</p><h3 id="proc/on_goal_turf_examined"><aside class="declaration">proc </aside>on_goal_turf_examined<aside>(/<a href="datum.html">datum</a>/source, /<a href="mob.html">mob</a>/examiner, /list/examine_text) 
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/signal_handlers.dm#L51">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;signal_handlers.dm 51"/></a></aside>
        </h3>
        <p>Handles examining the server. Shows cooldown time and efficiency.</p><h3 id="proc/on_template_loaded"><aside class="declaration">proc </aside>on_template_loaded<aside>(/<a href="datum.html">datum</a>/<a href="datum/lazy_template.html">lazy_template</a>/source, /list/created_atoms) 
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/signal_handlers.dm#L58">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;signal_handlers.dm 58"/></a></aside>
        </h3>
        <p>Scans over the inbound created_atoms from lazy templates</p><h3 id="proc/on_threat_created"><aside class="declaration">proc </aside>on_threat_created<aside>(/<a href="datum.html">datum</a>/source, /<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/threat) 
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/signal_handlers.dm#L98">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;signal_handlers.dm 98"/></a></aside>
        </h3>
        <p>Just in case there's any special handling for the domain
Handles when cybercops are summoned into the area or ghosts click a ghost role spawner</p><h3 id="proc/remove_threat"><aside class="declaration">proc </aside>remove_threat<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/threat) 
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/threats.dm#L55">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;threats.dm 55"/></a></aside>
        </h3>
        <p>Removes a specific threat - used when station spawning</p><h3 id="proc/reset"><aside class="declaration">proc </aside>reset<aside>(fast) 
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/map_handling.dm#L119">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;map_handling.dm 119"/></a></aside>
        </h3>
        <p>Stops the current virtual domain and disconnects all users</p><h3 id="proc/reset_equipment"><aside class="declaration">proc </aside>reset_equipment<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/<a href="mob/living/carbon.html">carbon</a>/<a href="mob/living/carbon/human.html">human</a>/person) 
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/util.dm#L90">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;util.dm 90"/></a></aside>
        </h3>
        <p>Removes all blacklisted items from a mob and returns them to base state</p><h3 id="proc/scrub_vdom"><aside class="declaration">proc </aside>scrub_vdom<aside>() 
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/map_handling.dm#L138">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;map_handling.dm 138"/></a></aside>
        </h3>
        <p>Tries to clean up everything in the domain</p><h3 id="proc/setup_glitch"><aside class="declaration">proc </aside>setup_glitch<aside>(/<a href="datum.html">datum</a>/<a href="datum/antagonist.html">antagonist</a>/<a href="datum/antagonist/bitrunning_glitch.html">bitrunning_glitch</a>/forced_role) 
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/threats.dm#L59">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;threats.dm 59"/></a></aside>
        </h3>
        <p>Selects the role and waits for a ghost orbiter</p><h3 id="proc/sever_connections"><aside class="declaration">proc </aside>sever_connections<aside>() 
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/util.dm#L101">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;util.dm 101"/></a></aside>
        </h3>
        <p>Severs any connected users</p><h3 id="proc/spark_at_location"><aside class="declaration">proc </aside>spark_at_location<aside>(/<a href="obj.html">obj</a>/cache) 
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/util.dm#L108">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;util.dm 108"/></a></aside>
        </h3>
        <p>Do some magic teleport sparks</p><h3 id="proc/spawn_glitch"><aside class="declaration">proc </aside>spawn_glitch<aside>(/<a href="datum.html">datum</a>/<a href="datum/antagonist.html">antagonist</a>/<a href="datum/antagonist/bitrunning_glitch.html">bitrunning_glitch</a>/chosen_role, /<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/mutation_target, /<a href="mob.html">mob</a>/<a href="mob/dead/observer.html">dead/observer</a>/ghost) 
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/threats.dm#L85">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;threats.dm 85"/></a></aside>
        </h3>
        <p>Orbit poll has concluded - spawn the antag</p><h3 id="proc/station_spawn"><aside class="declaration">proc </aside>station_spawn<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/antag, /<a href="obj.html">obj</a>/<a href="obj/machinery.html">machinery</a>/<a href="obj/machinery/byteforge.html">byteforge</a>/chosen_forge) 
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/threats.dm#L117">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;threats.dm 117"/></a></aside>
        </h3>
        <p>Oh boy - transports the antag station side</p><h3 id="proc/stock_gear"><aside class="declaration">proc </aside>stock_gear<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/<a href="mob/living/carbon.html">carbon</a>/<a href="mob/living/carbon/human.html">human</a>/avatar, /<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/<a href="mob/living/carbon.html">carbon</a>/<a href="mob/living/carbon/human.html">human</a>/neo, /<a href="datum.html">datum</a>/<a href="datum/lazy_template.html">lazy_template</a>/<a href="datum/lazy_template/virtual_domain.html">virtual_domain</a>/generated_domain) 
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/obj_generation.dm#L121">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;obj_generation.dm 121"/></a></aside>
        </h3>
        <p>Scans over neo's contents for bitrunning tech disks. Loads the items or abilities onto the avatar.</p><h3 id="proc/validate_mutation_candidates"><aside class="declaration">proc </aside>validate_mutation_candidates<aside>() 
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/threats.dm#L157">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;threats.dm 157"/></a></aside>
        </h3>
        <p>Removes any invalid candidates from the list</p><h3 id="proc/validate_turf"><aside class="declaration">proc </aside>validate_turf<aside>(/<a href="turf.html">turf</a>/chosen_turf) 
        
    
            <a href="https://github.com/TheCanoePirates/TCPStation/blob/254e80e37173a325f962a88a3ff3ba08988b3c15/code/modules/bitrunning/server/util.dm#L115">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;bitrunning&#x2F;server&#x2F;util.dm 115"/></a></aside>
        </h3>
        <p>Returns a turf if it's not dense, else will find a neighbor.</p></main>
<footer>
    tgstation.dme
    <a href="https://github.com/TheCanoePirates/TCPStation/tree/254e80e37173a325f962a88a3ff3ba08988b3c15">254e80e</a>
        (master) &mdash; <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.8.0</a></footer>
</body>
</html>
